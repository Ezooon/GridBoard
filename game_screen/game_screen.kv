#:import Grid grid.Grid

<GameScreen>:
    MDRectangleFlatButton:
        pos: dp(10), root.height - (dp(10) + self.height)
        text: 'Done'
        disabled: not root.editing
        opacity: 1 if root.editing else 0
        on_release:
            root.save()
            app.root.current = 'new_game'

    MDIconButton:
        icon: "arrow-left"
        top: root.top - dp(10)
        disabled: root.editing
        opacity: 0 if root.editing else 1
        x: dp(10)
        on_release:
            root.save()
            app.root.current = 'welcome_screen'

    MDIconButton:
        icon: "restore"
        top: root.top - dp(10)
        disabled: root.editing
        opacity: 0 if root.editing else 1
        right: root.width - dp(10)
        on_release:
            root.restart()

    MDIconButton:
        icon: "undo-variant"
        y: dp(10)
        disabled: root.editing
        opacity: 0 if root.editing else 1
        right: root.width - dp(10)
        on_release:
            root.undo()

    Grid:
        id: grid
        size_hint: None, None
        pos_hint: {'center_y': 0.5, 'center_x': 0.5}

    MDBoxLayout:
        size_hint: 1, None
        height: dp(40)
        top: grid.y
        x: grid.x
        disabled: not root.editing
        opacity: 1 if root.editing else 0
        MDCheckbox:
            id: click
            active: grid.click
            size_hint: None, None
            size: dp(40), dp(40)
            on_active:
                grid.click = self.active
        MDLabel:
            text: 'Click'
            size_hint: 1, 1
